expeditor:
  defaults:
    buildkite:
      timeout_in_minutes: 30

steps:
#######################################################################
# Release!
#######################################################################

  - label: "hab"
    command:
      - hab origin key generate scotthain
      - hab pkg build components/hab
    agents:
      queue: 'default-privileged'
    env:
      HAB_ORIGIN: "scotthain"

    # timeout_in_minutes: 10
    # retry:
    #   automatic:
    #     limit: 1

  - label: "plan-build"
    command:
      - hab origin key generate scotthain
      - cd hab pkg build components/plan-build
    agents:
      queue: 'default-privileged'
    env:
      HAB_ORIGIN: "scotthain"
    # timeout_in_minutes: 10
    # retry:
    #   automatic:
    #     limit: 1